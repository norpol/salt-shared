{% load_yaml as defaults %} 
master:
  status: absent

  reactor:
    status: absent

  gitcrypt:
    status: present

  config: |
    fileserver_backend:
      - roots
      - git
    pillar_roots:
      base:
        - /srv/pillar
    file_roots:
      base:
        - /srv/salt/custom
        - /srv/salt/salt-shared
    file_recv: True
    #gitfs_remotes:
    #  - https://github.com/saltstack-formulas/docker-formula.git

master_d:
  smtp_return:
    smtp:
      from: "saltmaster@localhost"
      to: "root"
      host: localhost
      fields: id,fun,jid
  mine_functions:
    mine_functions:
      test.ping: []
      network.interfaces: []
      network.get_hostname: []
      get_fqdn:
        mine_function: cmd.run
          name: 'hostname -f'

{% endload %}

{% set settings=salt['grains.filter_by']({'none': defaults},
  grain='none', default= 'none', merge= salt['pillar.get']('salt', {})) %}
