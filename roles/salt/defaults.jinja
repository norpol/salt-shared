{% load_yaml as defaults %} 
master:
  status: absent

  reactor:
    status: absent

  gitcrypt:
    status: present

  config: |
    fileserver_backend:
      - roots
      - git
    pillar_roots:
      base:
        - /srv/pillar
    file_roots:
      base:
        - /srv/salt/custom
        - /srv/salt/salt-shared
    file_recv: True

master_d:
  smtp_return:
    smtp:
      from: "saltmaster@localhost"
      to: "root"
      host: localhost
      fields: id,fun,jid

  mine_functions:
    mine_functions:
      test.ping: []
      network.interfaces: []
      network.get_hostname: []
      get_fqdn:
        mine_function: cmd.run_stdout
        cmd: hostname -f

install:
  type: git
  rev: 2014.7
  bootstrap: 'https://raw.githubusercontent.com/saltstack/salt-bootstrap/v2014.10.30/bootstrap-salt.sh'
  bootstrap_hash: 'sha256=3e7ee81d8d08b85227ba6eeaa46483fc9ab382d34088f80549835ea688b148f1'

{% endload %}

{% set settings=salt['grains.filter_by']({'none': defaults},
  grain='none', default= 'none', merge= salt['pillar.get']('salt', {})) %}
